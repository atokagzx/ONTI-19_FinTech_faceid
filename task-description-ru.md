## Описание задачи

Технологии для распознавания и идентификации лиц уже давно интересуют исследователей, занимающихся компьютерными науками. За год произведены наработки, часть которых выложена в публичный доступ в виде исходного кода, еще часть используется в закрытых коммерческих продуктах, а крупные компании такие как Microsoft, Google и Amazon подготовили web-сервисы, которые разработчки приложений могут использовать в своих продуктах. Таким образом, компании, которые только начинают свой путь в создании систем идентификаций человека по лицу, имеют возможность уже на самых ранних стадиях создания продукта демонстрировать основной функционал, не тратя ресурсы (время и деньги) на серьезные исследования и реализацию алгоритмов машинного обучения, решающих данную задачу.

Сервис, предоставляемый _Microsoft Face API_, может быть использован на любых фазах процесса идентификации человека по лицу:
1. [Инициализация группы людей](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395244), для последующей идентификации конкретного человека внутри этой группы
2. [Инициализация отдельных людей](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523c) внутри группы
3. [Заполнение примерами лиц](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b) хранилища для каждого человека
4. [Тренировка сервиса](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395249) на идентификацию лиц по загруженным примерам
5. [Идентификация](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395239) одного из человек в группе по изображению его лица  

Ваща задача - написать приложение на языке Python, которое могло бы идентифицировать человека по изображению лица. 

Приложение (python-скрипт) должно:
* идентифицировать одного человека из группы, состоящей не менее чем из 7 людей. 
* собирать данные о лице пользователей из видеопотока (файл)
* натренировать систему идентификации на использование собранных данных
* по изображению лица пользователя взятого из видеопотока (файл) идентифицировать его
* сообщать о невозможности идентификации пользователя  

Имя исполняемого скрипта должно быть `faceid.py`

Скрипт должен работать с _Microsoft Face API_ через заранее созданный аккаунт на сервисе. Ключ подписки для использования сервиса указывается в файле `msfaceapi.json`:
```json
{"key": "563879b61984550e40cbbe8d3039523c"}
```

Группа пользователей, с которой работает в данный момент скрипт задается через файл `faceid.json`:
```json
{"groupId": "fintech-01"}
```

### Примеры использования

#### Добавление пользователя (US-01)

Пользователь может добавить нового человека в систему:
```shell
$ faceid.py --name "Elon Musk" video.mpg
5 frames extracted
PersonId: 419e345a-e6d6-4d9c-953d-667787b8d52e
FaceIds
=======
e27558b9-812d-41c3-b114-8e434b8f4602
44c350f2-6653-4616-a1b7-e0fe9b481b6b
f945a3be-4b20-4049-b080-4142a55e4f93
855ab7c2-9bb3-49ed-8cac-1366c0274b08
9c4af288-54cd-4375-8eef-f8c29ed56685
```
Количество кадров для добавления нового человека в систему - всегда 5. Кадры из видео берутся через равные промежутки времени, первый кадр - в начале видео, пятый - в конце. 

#### Добавление новых изображений лица пользователя (US-02)

Пользователь может добавить дополнительные изображения лица человека к уже существующим в системе:
```shell
$ faceid.py --name "Elon Musk" video2.mpg
5 frames extracted
PersonId: 419e345a-e6d6-4d9c-953d-667787b8d52e
FaceIds
=======
035cc1f5-2ac3-4099-8af5-2b3f3a25bf55
0479ee7d-0572-4ac8-bc5c-6863efdbb347
bf910059-3944-49cc-b6ac-4ac15cdd8e80
e93568a3-72c8-41f1-a5b0-9547121aa50d
365ffb4f-0bfa-4a99-808e-bb7c1f19237b
```

#### Обратботка ошибок при добавлении лиц пользователя (US-03)

Если при попытке добавить новые изображения с лицом пользователя, на видео нет кадров с лицом пользователя, то выдается ошибка:
```shell
$ faceid.py --name "Elon Musk" video5.mpg
Video does not contain any face
```
При обработке видео, где содержится меньше 5 кадров, должна выдаваться такая же ошибка. 

#### Удаление пользователя (US-04)

Пользователь может удалить человека из системы идентификации:
```shell
$ faceid.py --del "Elon Musk"
Person with id 419e345a-e6d6-4d9c-953d-667787b8d52e deleted
```

#### Удаление несуществующего пользователя (US-05)

При попытке удалить незарегистрированного человека из системы идентификации выдается ошибка:
```shell
$ faceid.py --del "Vitalik Buterin"
No person with name "Vitalik Buterin"
```

#### Инициализация системы идентификации (US-06)

Пользователь может запустить обучение системы идентификации:
```shell
$ faceid.py --train
Training task for 7 persons started
```

#### Идентификация пользователя (US-07)

Пользователь может выполнить идентификацию человека по кадрам из видео. 
```shell
$ faceid.py --identify video3.mpg
The person is "Elon Musk"
```
Идентификация должна проходить успешно, только если _Microsoft Face API_ для каждого из трех разных кадров из видео указывает на одного и того же человека с высокой степенью (не менее 50%) уверенности определения.

#### Обработка ошибок идентификации пользователя (US-08)

Пользователь получит сообщение о невозможности идентификации, если _Microsoft Face API_ не выдает в каждом из трех разных кадров из видео высокую (не менее 50%) степень уверенности определения одного и тогже человека:
```shell
$ faceid.py --identify video4.mpg
The person cannot be identified
```

#### Обработка ошибок инициализации (US-09)

Пользователь получит сообщение об ошибке, если процесс обучения системы еще не завершен:
```shell
$ faceid.py --identify video3.mpg
The system is not ready yet
```
